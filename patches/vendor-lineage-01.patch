From 6c2a7936bf9ba300c391a33450349bbfbca91d1a Mon Sep 17 00:00:00 2001
From: Adrian DC <radian.dc@gmail.com>
Date: Mon, 24 Jul 2017 14:05:30 +0200
Subject: [PATCH 1/4] soong: Add TARGET_USES_MEDIA_EXTENSIONS

* Soong product variable 'uses_media_extensions'

Change-Id: Icf36c7e4a90ace7a4c603c63ab1126c1554ffab8
Signed-off-by: Adrian DC <radian.dc@gmail.com>
---
 build/soong/android/variable.go | 4 ++++
 build/soong/soong_config.mk     | 1 +
 2 files changed, 5 insertions(+)

diff --git a/build/soong/android/variable.go b/build/soong/android/variable.go
index 4b905d9..0d2fb99 100644
--- a/build/soong/android/variable.go
+++ b/build/soong/android/variable.go
@@ -9,6 +9,9 @@ type Product_variables struct {
 	Uses_generic_camera_parameter_library struct {
 		Srcs []string
 	}
+	Uses_media_extensions struct {
+		Cflags []string
+	}
 	Uses_qcom_bsp_legacy struct {
 		Cppflags []string
 	}
@@ -23,6 +26,7 @@ type ProductVariables struct {
 	Specific_camera_parameter_library  *string `json:",omitempty"`
 	Target_shim_libs  *string `json:",omitempty"`
 	Uses_generic_camera_parameter_library  *bool `json:",omitempty"`
+	Uses_media_extensions  *bool `json:",omitempty"`
 	Uses_qcom_bsp_legacy  *bool `json:",omitempty"`
 	Uses_qti_camera_device  *bool `json:",omitempty"`
 }
diff --git a/build/soong/soong_config.mk b/build/soong/soong_config.mk
index 4058207..218cb6e 100644
--- a/build/soong/soong_config.mk
+++ b/build/soong/soong_config.mk
@@ -8,6 +8,7 @@ lineage_soong:
 	echo '    "Specific_camera_parameter_library": "$(TARGET_SPECIFIC_CAMERA_PARAMETER_LIBRARY)",'; \
 	echo '    "Target_shim_libs": "$(subst $(space),:,$(TARGET_LD_SHIM_LIBS))",'; \
 	echo '    "Uses_generic_camera_parameter_library": $(if $(TARGET_SPECIFIC_CAMERA_PARAMETER_LIBRARY),false,true),'; \
+	echo '    "Uses_media_extensions": $(if $(filter true,$(TARGET_USES_MEDIA_EXTENSIONS)),true,false),'; \
 	echo '    "Uses_qcom_bsp_legacy": $(if $(filter true,$(TARGET_USES_QCOM_BSP_LEGACY)),true,false),'; \
 	echo '    "Uses_qti_camera_device": $(if $(filter true,$(TARGET_USES_QTI_CAMERA_DEVICE)),true,false)'; \
 	echo '},'; \
-- 
2.7.4

