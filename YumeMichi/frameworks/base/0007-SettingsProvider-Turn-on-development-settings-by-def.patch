From 8046db4172af440b1117816e1ac8e8aa9739d16b Mon Sep 17 00:00:00 2001
From: xyyx <xyyx@mail.ru>
Date: Fri, 7 Sep 2018 10:33:50 +0800
Subject: [PATCH 07/10] SettingsProvider: Turn on development settings by
 default

Change-Id: I0dd472ecfecbac600a98615f67ed0fa21d13c2e6
---
 packages/SettingsProvider/res/values/defaults.xml              | 3 +++
 .../src/com/android/providers/settings/DatabaseHelper.java     | 3 +++
 2 files changed, 6 insertions(+)

diff --git a/packages/SettingsProvider/res/values/defaults.xml b/packages/SettingsProvider/res/values/defaults.xml
index b2b58f00506..7e4633929cc 100644
--- a/packages/SettingsProvider/res/values/defaults.xml
+++ b/packages/SettingsProvider/res/values/defaults.xml
@@ -220,4 +220,7 @@
 
     <!-- Default for Settings.Global.NTP_SERVER_2's property name -->
     <string name="def_ntp_server_2" translatable="false">persist.vendor.ntp.svr_2</string>
+
+    <!-- Default for Settings.Global.DEVELOPMENT_SETTINGS_ENABLED -->
+    <integer  name="def_development_settings">1</integer>
 </resources>
diff --git a/packages/SettingsProvider/src/com/android/providers/settings/DatabaseHelper.java b/packages/SettingsProvider/src/com/android/providers/settings/DatabaseHelper.java
index 67bacf050a8..843e9c982c9 100644
--- a/packages/SettingsProvider/src/com/android/providers/settings/DatabaseHelper.java
+++ b/packages/SettingsProvider/src/com/android/providers/settings/DatabaseHelper.java
@@ -2634,6 +2634,9 @@ class DatabaseHelper extends SQLiteOpenHelper {
 	    loadStringSetting(stmt, Settings.Global.NTP_SERVER_2,
                     R.string.def_ntp_server_2);
 
+            loadIntegerSetting(stmt, Global.DEVELOPMENT_SETTINGS_ENABLED,
+                    R.integer.def_development_settings);
+
             /*
              * IMPORTANT: Do not add any more upgrade steps here as the global,
              * secure, and system settings are no longer stored in a database
-- 
2.17.1

